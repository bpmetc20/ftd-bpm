package org.activiti.designer.util;

import org.activiti.designer.eclipse.common.ActivitiPlugin;
import org.eclipse.core.resources.IFile;
import org.eclipse.core.runtime.IStatus;
import org.eclipse.core.runtime.Status;
import org.eclipse.jface.dialogs.ErrorDialog;
import org.eclipse.swt.widgets.Display;
import org.eclipse.ui.IWorkbenchPage;
import org.eclipse.ui.PartInitException;
import org.eclipse.ui.PlatformUI;
import org.eclipse.ui.ide.IDE;

public class DiagramHandler {

	public static void openDiagramForBpmnFile(IFile dataFile) {

	      if (dataFile.exists())
	      {
	        final IWorkbenchPage activePage
	          = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();

	        try {
	          IDE.openEditor(activePage, dataFile, ActivitiConstants.DIAGRAM_EDITOR_ID, true);
	        } catch (PartInitException exception) {
	          final IStatus status = new Status(IStatus.ERROR, ActivitiPlugin.getID()
	                                          , "Error while opening new editor.", exception);

	          ErrorDialog.openError(Display.getCurrent().getActiveShell()
	                              , "Error Opening Activiti Diagram", null, status);
	        }
	      }
	 }
}
